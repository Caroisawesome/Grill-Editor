!function(){ABM.FirebaseUI=function(){function t(t,e,i){var s,o,n,l,r=this;this.fbname=t,this.model=e,this.ui=i,window.fbui=this,this.fb=new Firebase(t),this.refs={},n=this.ui;for(s in n)o=n[s],this.refs[s]=this.fb.child(s);this.vals={},l=this.ui;for(s in l)o=l[s],this.vals[s]=o.val;this.resetModel(),this.fb.set(i,function(t){return console.log(null!=t?"FB error: "+t:"FB ready")}),this.fb.on("child_changed",function(t){return console.log("childChange",t.name(),t.val().val),r.setModelValue(t.name(),t.val().val)}),console.log("--- Firebase setup")}return t.prototype.setModelValue=function(t,e){var i;if(console.log("setModelValue: "+t+", "+e),this.vals[t]=e,"button"===this.ui[t].type){if(!e)return;this.setUIValue(t,!1)}return null!=(i=this.ui[t].setter)?this.model[i](e):this.model[t]=e},t.prototype.setUIValue=function(t,e){return console.log("setUIValue: "+t+", "+e),this.refs[t].child("val").set(e)},t.prototype.getUIValue=function(t){return this.vals[t]},t.prototype.resetModel=function(){var t,e,i,s;i=this.ui,s=[];for(t in i)e=i[t],"button"!==e.type&&s.push(this.setModelValue(t,e.val));return s},t.prototype.resetUI=function(){var t,e,i,s;i=this.ui,s=[];for(t in i)e=i[t],"button"!==e.type&&s.push(this.setUIValue(t,e.val));return s},t}()}.call(this);